<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thống kê doanh số</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      line-height: 1.6;
    }
    h1 {
      color: #333;
    }
    .stats-container {
      max-width: 600px;
      margin: 0 auto;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 8px;
      background-color: #f9f9f9;
    }
    .stat-box {
      margin-bottom: 20px;
    }
    .stat-box h2 {
      color: #555;
      margin-bottom: 10px;
    }
    .stat-box p {
      margin: 5px 0;
    }
    .highlight {
      font-weight: bold;
      color: #007BFF;
    }
  </style>
</head>
<body>
  <h1>Thống kê doanh số</h1>
  <div class="stats-container">
    <div class="stat-box">
      <h2>Hôm nay</h2>
      <p>Ngày: <span id="today-date" class="highlight">Đang tải...</span></p>
      <p>Doanh thu: <span id="today-revenue" class="highlight">Đang tải...</span></p>
    </div>
    <div class="stat-box">
      <h2>7 ngày gần nhất</h2>
      <p>Bắt đầu: <span id="7days-start" class="highlight">Đang tải...</span></p>
      <p>Kết thúc: <span id="7days-end" class="highlight">Đang tải...</span></p>
      <p>Doanh thu: <span id="7days-revenue" class="highlight">Đang tải...</span></p>
    </div>
    <div class="stat-box">
      <h2>30 ngày gần nhất</h2>
      <p>Bắt đầu: <span id="30days-start" class="highlight">Đang tải...</span></p>
      <p>Kết thúc: <span id="30days-end" class="highlight">Đang tải...</span></p>
      <p>Doanh thu: <span id="30days-revenue" class="highlight">Đang tải...</span></p>
    </div>
  </div>

  <script>
    async function fetchRevenue() {
      try {
        const response = await fetch('https://resmant11111-001-site1.anytempurl.com/Statistics/Revenue');
        if (!response.ok) throw new Error('Không thể lấy dữ liệu doanh số.');

        const data = await response.json();
        console.log(data); // Kiểm tra dữ liệu trả về từ API

        // Định dạng lại ngày
        const formatDate = (dateString) => {
          const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
          return new Date(dateString).toLocaleDateString('vi-VN', options);
        };

        // Cập nhật dữ liệu vào HTML
        document.getElementById('today-date').textContent = formatDate(data.today.date);
        document.getElementById('today-revenue').textContent = `${data.today.totalRevenue.toLocaleString()} VND`;

        document.getElementById('7days-start').textContent = formatDate(data.last7Days.startDate);
        document.getElementById('7days-end').textContent = formatDate(data.last7Days.endDate);
        document.getElementById('7days-revenue').textContent = `${data.last7Days.totalRevenue.toLocaleString()} VND`;

        document.getElementById('30days-start').textContent = formatDate(data.last30Days.startDate);
        document.getElementById('30days-end').textContent = formatDate(data.last30Days.endDate);
        document.getElementById('30days-revenue').textContent = `${data.last30Days.totalRevenue.toLocaleString()} VND`;
      } catch (error) {
        console.error('Lỗi:', error);
        alert('Không thể tải dữ liệu doanh số.');
      }
    }

    // Gọi hàm khi tải trang
    fetchRevenue();
  </script>
</body>
</html>
